!function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var i={};t.m=e,t.c=i,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.d(t,"a",function(){return a});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function(){function e(t,i,r){n(this,e),this.red=t,this.green=i,this.blue=r}return r(e,[{key:"toHexValue",value:function(){return"#"+this.red.toString(16).padStart(2,"0")+this.green.toString(16).padStart(2,"0")+this.blue.toString(16).padStart(2,"0")}}],[{key:"create",value:function(t){var i=parseInt(t.substring(1),16);return new e(i>>16&255,i>>8&255,255&i)}}]),e}()},function(e,t,i){"use strict";i.d(t,"f",function(){return n}),i.d(t,"e",function(){return o}),i.d(t,"c",function(){return a}),i.d(t,"d",function(){return r}),i.d(t,"a",function(){return s}),i.d(t,"b",function(){return c});var n=function(){return Math.random()*Number.MAX_SAFE_INTEGER>>>0},r=Math.abs,a=Math.abs,o=function(e){return(n()%1e4-5e3)*e/5e3},s=Math.max,c=Math.min},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.d(t,"a",function(){return o});var r=i(0),a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function(){function e(t,i,r){n(this,e),this.name=t,this.colors=[],this.setColors(i,r)}return a(e,[{key:"setColors",value:function(e,t){for(var i=0;i<256;i++)if(i<128){var n=i/127;this.colors[i]=new r.a(e.red*n|0,e.green*n|0,e.blue*n|0)}else{var n=(i-127)/128,a=1-n;this.colors[i]=new r.a(e.red*a+t.red*n|0,e.green*a+t.green*n|0,e.blue*a+t.blue*n|0)}}}]),e}();o.schemes=[new o("Fiery Orange",new r.a(255,128,0),new r.a(255,255,0)),new o("Skyish Teal",new r.a(0,128,255),new r.a(0,255,255)),new o("Velvet Blue",new r.a(64,64,128),new r.a(192,192,255)),new o("Slimy Green",new r.a(32,128,32),new r.a(160,255,160)),new o("Burning Pink",new r.a(255,64,64),new r.a(255,192,192)),new o("Flaming Metal",new r.a(128,0,41),new r.a(255,192,128)),new o("Custom",new r.a(0,0,0),new r.a(255,255,255))]},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.d(t,"a",function(){return a});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function(){function e(){n(this,e),this.x=0,this.y=0,this.dx=0,this.dy=0,this.lx=0,this.ly=0,this.ax=0,this.ay=0,this.attract=!1,this.color=0,this.red=0,this.green=0,this.blue=0}return r(e,[{key:"setTrueColor",value:function(e){var t=e[this.color];void 0!==t&&(this.red=t.red,this.green=t.green,this.blue=t.blue)}}]),e}()},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.d(t,"a",function(){return l});var r=i(1),a=i(0),o=i(2),s=i(3),c=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function(){function e(t){n(this,e),this.parent=t,this.flameSpeed=.03,this.burnFade=3,this.disableFire=0,this.colorScheme=0,this.randomColor=!1,this.cycleColors=0,this.width=this.height=0,this.customPe1=new a.a(0,0,0),this.customPe2=new a.a(255,255,255),this.debug=!1}return c(e,[{key:"initScreen",value:function(t){var i=this.parent;this.canvas=t,this.width=this.WIDTH=this.canvas.width,this.height=this.HEIGHT=this.canvas.height,this.randomColor&&(this.colorScheme=Object(r.f)()%o.a.schemes.length);var n;for(this.half=[],n=0;n<256;n++)this.half[n]=n>>1;for(var n=0;n<e.MAX_PART;n++)i.p[n]=new s.a,i.p[n].x=i.p[n].lx=e.XOFF+Object(r.f)()%(this.width-2*e.XOFF),i.p[n].y=i.p[n].ly=e.YOFF+Object(r.f)()%(this.height-2*e.YOFF),i.p[n].dx=i.p[n].dy=0,i.p[n].color=Object(r.f)()%127+127|0;i.timeStart=i.lastTime=i.time=Date.now(),i.particle.follow=1&Object(r.f)(),i.particle.multipleFollow=1&Object(r.f)(),i.particle.noiseBurn=1&Object(r.f)(),i.particle.useGravity=1&Object(r.f)(),this.ctx=this.canvas.getContext("2d"),this.ctx.fillStyle="black",this.ctx.fillRect(0,0,this.width,this.height),this.imageData=this.ctx.getImageData(0,0,this.width,this.height)}},{key:"palette",value:function(e){this.colorScheme=e;var t=o.a.schemes[e],i=this.parent;t.colors.forEach(function(e,t){i.pe[t].red=e.red,i.pe[t].green=e.green,i.pe[t].blue=e.blue})}},{key:"draw",value:function(){var e=this.imageData.data,t=4*this.WIDTH,i=0,n=this.burnFade;this.drawParticles();var r,a,o,s=this.height,c=this.width;this.WIDTH;if(this.parent.particle.burnDown);else for(o=3;o<s-2+1;o++)for(r=4*c*o+4,a=1;a<c-1;a++)e[r+3]=255,function(){for(var a=0;a<4;a++)i=e[r+a-t]+e[r+a-4]+e[r+a]+e[r+a+4]-n>>2,e[r+a-t]=i<0?0:i}(),r+=4;if(this.ctx.putImageData(this.imageData,0,0),this.debug)for(var l=this.parent,h=0;h<l.particle.nParticles;h++)this.ctx.beginPath(),this.ctx.arc(l.p[h].x,l.p[h].y,5,0,2*Math.PI),this.ctx.strokeStyle="red",this.ctx.stroke(),this.ctx.closePath(),this.ctx.beginPath(),this.ctx.moveTo(l.p[h].x,l.p[h].y),this.ctx.lineTo(l.p[h].x+10*l.p[h].dx,l.p[h].y+10*l.p[h].dy),this.ctx.strokeStyle="lime",this.ctx.stroke(),this.ctx.closePath()}},{key:"drawParticles",value:function(){for(var t,i,n,a,o,s,c,l,h,u,p,d,f,a,o,b,y=this.imageData.data,O=this.width,v=this.height,m=4*O,g=this.parent,T=0;T<g.particle.nParticles;T++)if(g.particle.altColor&&(g.p[T].color-=1,g.p[T].color<=128&&(g.p[T].color+=32)),g.p[T].lx=g.p[T].x,g.p[T].ly=g.p[T].y,g.p[T].attract&e.ATTRACT_GRAVITY&&(g.p[T].dx+=g.particle.xgrav,g.p[T].dy+=g.particle.ygrav),g.p[T].attract&e.ATTRACT_ANGLE&&(l=g.p[T].ax-g.p[T].x,h=g.p[T].ay-g.p[T].y,u=Math.sqrt(l*l+h*h),p=Math.sqrt(g.p[T].dx*g.p[T].dx+g.p[T].dy*g.p[T].dy),0==u&&(u=2),0==p&&(p=2),d=0==g.p[T].dx&&0==g.p[T].dy?g.particle.identityAngle:Math.atan2(g.p[T].dy,g.p[T].dx),f=0==l&&0==h?g.particle.identityAngle-d:Math.atan2(h,l)-d,f>Math.PI&&(f-=2*Math.PI),f<-Math.PI&&(f+=2*Math.PI),d+=.05*f,g.p[T].dx=Math.cos(d)*p,g.p[T].dy=Math.sin(d)*p),g.p[T].x+=g.p[T].dx,g.p[T].y+=g.p[T].dy,g.p[T].x<e.XOFF&&(g.p[T].x=e.XOFF,g.p[T].dx=.95*Object(r.d)(g.p[T].dx),g.p[T].dy+=Object(r.e)(.5),g.particle.altColor&&(g.p[T].color=Object(r.b)(254,g.p[T].color+32))),g.p[T].x>=O-e.XOFF&&(g.p[T].x=O-e.XOFF-1,g.p[T].dx=.95*-Object(r.d)(g.p[T].dx),g.p[T].dy+=Object(r.e)(.5),g.particle.altColor&&(g.p[T].color=Object(r.b)(254,g.p[T].color+32))),g.p[T].y<e.YOFF&&(g.p[T].y=e.YOFF,g.p[T].dy=.95*Object(r.d)(g.p[T].dy),g.p[T].dx+=Object(r.e)(.5),g.particle.altColor&&(g.p[T].color=Object(r.b)(254,g.p[T].color+32))),g.p[T].y>=v-e.YOFF&&(g.p[T].y=v-e.YOFF-1,g.p[T].dy=.95*-Object(r.d)(g.p[T].dy),g.p[T].dx+=Object(r.e)(.5),g.particle.altColor&&(g.p[T].color=Object(r.b)(254,g.p[T].color+32))),a=0|g.p[T].lx,o=0|g.p[T].ly,s=(0|g.p[T].x)-a,c=(0|g.p[T].y)-o,!(a<e.XOFF||o<e.YOFF||a>=O-e.XOFF||o>=v-e.YOFF))if(Object(r.c)(s)>Object(r.c)(c)){s<0&&(a+=s,o+=c,s=-s,c=-c);var S;t=S=-s,i=Object(r.c)(c),b=(a<<2)+o*m,n=c<0?-m:m;for(var j=[g.p[T].red,g.p[T].green,g.p[T].blue,255];s>=0;){for(var E=0;E<3;E++)y[b-m+E]=Object(r.a)(y[b-m+E],j[E]>>1),y[b+E]=Object(r.a)(y[b+E],j[E]),y[b+m+E]=Object(r.a)(y[b+m+E],j[E]>>1);y[b-m+E]=255,y[b+E]=255,y[b+m+E]=255,t+=i,t>=0&&(t+=S,b+=n),b+=4,s--}}else{c<0&&(a+=s,o+=c,s=-s,c=-c);var S;t=S=-c,i=Object(r.c)(s),b=(a<<2)+o*m,n=s<0?-4:4;for(var j=[g.p[T].red,g.p[T].green,g.p[T].blue,255];c>=0;){for(var E=0;E<3;E++)y[b-n+E]=Object(r.a)(y[b-n+E],j[E]>>1),y[b+E]=Object(r.a)(y[b+E],j[E]),y[b+m+E]=Object(r.a)(y[b+m+E],j[E]>>1);y[b-m+E]=255,y[b+E]=255,y[b+m+E]=255,t+=i,t>=0&&(t+=S,b+=n),b+=m,c--}}}},{key:"write",value:function(e,t,i){var n=this.ctx;n.fillStyle="white",n.font="12px sans-serif",t+=12,i.split("\n").forEach(function(i){n.fillText(i,e,t),t+=12})}}]),e}();l.XOFF=5,l.YOFF=3,l.ATTRACT_NONE=0,l.ATTRACT_GRAVITY=1,l.ATTRACT_ANGLE=2,l.MAX_PART=1e4},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),r=i(6),a=(i.n(r),i(0)),o=i(2),s=(i(3),i(7)),c=i(4),l=i(8),h=i(9),u=document.getElementById("canvas-container"),p=document.getElementById("x"),d=!1;document.getElementById("start-stop").addEventListener("click",function(e){e.preventDefault(),d=!d,d?(this.innerHTML="Stop",window.requestAnimationFrame(I)):this.innerHTML="Start"},!1);var f=new s.a,b=new l.a(100,f);f.particle=b;var y=new c.a(f);f.screen=y,y.palette(0),y.initScreen(p);var O=function(){p.width=p.offsetWidth,p.height=p.offsetHeight,y.width=p.width,y.height=p.height,y.WIDTH=p.width,y.HEIGHT=p.height,y.imageData=y.ctx.getImageData(0,0,y.width,y.height),console.log("Update size: %d×%d",y.width,y.height)};window.setTimeout(O,200),window.addEventListener("resize",O);var v=null;new MutationObserver(function(e){console.log("mutation"),null!==v&&window.clearTimeout(v),v=window.setTimeout(function(){v=null,O()},200)}).observe(u,{attributes:!0,childList:!1});var m={width:p.width,height:p.height},g=function(){var e=document.mozFullScreenElement||document.webkitFullscreenElement||document.fullScreenElement,t=document.mozFullScreenEnabled||document.webkitFullscreenEnabled||document.fullScreenEnabled;console.log("fullscreenchange",e,t),e!==u&&void 0!==e||(e?(console.log("entering fullscreen"),m.width=p.offsetWidth,m.height=p.offsetHeight):(console.log("leaving fullscreen"),u.style.width=m.width+"px",u.style.height=m.height+"px"),v=window.setTimeout(O,200))};document.addEventListener("mozfullscreenchange",g,!1),document.addEventListener("webkitfullscreenchange",g,!1);var T=[{legend:"Debug",options:["stats","posdir","timeout"]},{legend:"Fire options",options:["customPe1","customPe2","colorSchemes","cycleColors","fadeSpeed"]},{legend:"Particles",options:["numParticles","style","wall","events","gravity"]}],S={stats:{type:"checkbox",label:"Show statistics",value:!0},posdir:{type:"checkbox",label:"Position & dir",set:function(e){y.debug=!!e}},colorSchemes:{type:"select",label:"Color schemes",cssClass:"palette-selector",set:function(e){y.palette(e),f.p.forEach(function(e){e.setTrueColor(f.pe)})},get:function(){}},customPe1:{type:"color",label:"Custom color 1",set:function(e){y.customPe1=a.a.create(e),o.a.schemes[o.a.schemes.length-1].setColors(y.customPe1,y.customPe2),drawPalettes()},get:function(){return y.customPe1?y.customPe1.toHexValue():"#FFFFFF"}},customPe2:{type:"color",label:"Custom color 2",set:function(e){y.customPe2=a.a.create(e),o.a.schemes[o.a.schemes.length-1].setColors(y.customPe1,y.customPe2),drawPalettes()},get:function(){return y.customPe2?y.customPe2.toHexValue():"#FFFFFF"}},cycleColors:{type:"checkbox",label:"Cycle between colors",set:function(e){y.cycleColors=e,S.colorSchemes.input.disabled=e}},numParticles:{type:"slider",label:"Quantity",min:1,max:c.a.MAX_PART,set:function(e){return b.nParticles=e},get:function(){return b.nParticles}},fadeSpeed:{type:"slider",label:"Fade speed",min:1,max:20,set:function(e){console.log(y.burnFade,e),y.burnFade=0|e},get:function(){return y.burnFade}},style:{type:"select",label:"Style",set:function(e){return b.particleStyle=e},get:function(){return b.particleStyle}},events:{type:"slider",label:"Events",min:1,max:100,set:function(e){return b.RANDEFFECT=e},get:function(){return b.RANDEFFECT}},gravity:{type:"slider",label:"Gravity",min:1,max:200,set:function(e){return b.GRAV_TIME=e},get:function(){return b.GRAV_TIME}},timeout:{type:"slider",label:"Frame rate",min:20,max:500,step:10,value:200}},j=document.querySelector("form");Object(h.a)(T,S,j),function(){var e=document.createElement("canvas");e.width=256,e.height=1;var t=e.getContext("2d"),i=S.colorSchemes.input;i.innerHTML="",o.a.schemes.forEach(function(n,r){t.fillStyle="transparent",t.fillRect(0,0,256,32),n.colors.forEach(function(e,i){t.fillStyle="rgb("+e.red+" , "+e.green+", "+e.blue+")",t.fillRect(i,0,1,1)});var a=new Option(n.name,r);a.style.backgroundImage="url("+e.toDataURL()+")",i.appendChild(a)}),i.size=o.a.schemes.length}(),document.getElementById("fullsrcreen").addEventListener("click",function(){document.mozFullScreen||document.webkitFullScreen?document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen():u.mozRequestFullScreen?u.mozRequestFullScreen():u.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)},!1),document.querySelectorAll("input[type=range]").forEach(function(e){e.addEventListener("input",function(){e.nextElementSibling.innerHTML=e.value},!1)}),document.getElementById("reset").addEventListener("click",function(e){b.doStatic(1)},!1),l.a.styles.forEach(function(e,t){var i=new Option(e,t);S.style.input.appendChild(i)});var E,x=0,w=1.1,F=Date.now(),I=function e(){if(f.frame(),x%20==0){var t=Date.now(),i=t-F;E=Math.round(20/i*1e3),F=t}if(x++,S.stats.value&&y.write(10,10,"Frame: "+x+"\n            "+y.width+"×"+y.height+"\n            Color scheme: "+o.a.schemes[y.colorScheme].name+"\n            Particles: "+b.nParticles+"\n            Style: "+l.a.styles[b.particleStyle]+"\n            Fade speed: "+y.burnFade+"\n            Event speed: "+b.RANDEFFECT+"\n            FPS: "+E+"\n            "),f.screen.cycleColors&&x%2==0){w+=.01,w>=1&&(f.cf=f.screen.colorScheme,f.screen.randomColor?f.screen.colorScheme=Object(n.f)()%o.a.schemes.length:++f.screen.colorScheme>=o.a.schemes.length&&(f.screen.colorScheme=0),f.screen.palette(f.screen.colorScheme),f.ct=f.screen.colorScheme,w=0);for(var r=o.a.schemes[f.ct].colors,a=o.a.schemes[f.cf].colors,s=w,c=1-s,h=1;h<255;h++)f.pe[h].red=a[h].red*c+r[h].red*s,f.pe[h].green=a[h].green*c+r[h].green*s,f.pe[h].blue=a[h].blue*c+r[h].blue*s}d&&(S.timeout.value<=20?window.requestAnimationFrame(e):window.setTimeout(function(){window.requestAnimationFrame(e)},S.timeout.value))}},function(e,t){},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.d(t,"a",function(){return o});var r=i(0),a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function(){function e(){n(this,e),this.particle=null,this.screen=null,this.xMouse=0,this.yMouse=0,this.timeStart=0,this.timeLast=0,this.time=0,this.p=[],this.pe=[];for(var t=0;t<256;t++)this.pe[t]=new r.a(0,0,0);this.cf=0,this.ct=0}return a(e,[{key:"frame",value:function(){this.handleParticleStyle(),this.handleScreen()}},{key:"handleParticleStyle",value:function(){this.particle.frame()}},{key:"handleScreen",value:function(){this.screen.draw()}}]),e}()},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.d(t,"a",function(){return c});var r=i(4),a=i(1),o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(){function e(t,i){n(this,e),this.name=t,this.value=i}return o(e,null,[{key:"init",value:function(t,i){return void 0===e.items[t]&&(e.items[t]=new e(t,i)),e.items[t]}}]),e}();s.items={};var c=function(){function e(t,i){n(this,e),this.parent=i,this.identityAngle=3,this.particleStyle=e.STYLE_NORMAL,this.wallStyle=0,this.zMoveSpeed=2,this.nParticles=t,this.GRAV_TIME=50,this.RANDEFFECT=75,this.altColor=!1,this.noiseBurn=!1,this.follow=!0,this.multipleFollow=!0,this.useGravity=!0,this.fullscreen=!1,this.stretch=!1,this.explode=!1,this.cube3D=!0,this.attract=!0,this.switchMode=!1,this.shakeUp=!1,this.freeze=!1,this.useRandom=!0,this.comet=!1,this.emit=!1,this.followMouse=!1,this.isMinimized=!1,this.emitCount=0,this.explodeX=0,this.explodeY=0,this.innerRing=!1,this.popcorn=!1,this.emitRotate=0,this.xgrav=0,this.ygrav=0,this.burnDown=!1,this.squigglyWiggly=!1,this.galacticStorm=!1,this.pixieDust=!1,this.magnetX=0,this.magnetY=0}return o(e,[{key:"frame",value:function(){var t=this.parent;t.lastTime=t.time,t.time=Date.now(),this.particleStyle===e.STYLE_STARFIELD?this.frameStarfield():this.frameGravity()}},{key:"clearMode",value:function(){this.pixieDust=!1,this.rainbowHole=!1,this.squigglyWiggly=!1,this.galacticStorm=!1,this.explode=!1,this.innerRing=!1,this.emit=!1,this.popcorn=!1}},{key:"setMode",value:function(t){switch(this.clearMode(),t){case e.STYLE_EXPLOSIVE:this.explode=!0;break;case e.STYLE_RINGS:this.innerRing=!0;break;case e.STYLE_SPIRALS:this.emit=!0,this.emitRotate=Object(a.f)()%3-1;break;case e.STYLE_POPCORN:this.popcorn=!0;break;case e.STYLE_RAINBOWHOLE:this.rainbowHole=!0;break;case e.STYLE_WORMS:this.suigglyWiggly=!0;break;case e.STYLE_GALATIC_STORM:this.galacticStorm=!0;break;case e.STYLE_PIXIE_DUST:this.pixieDust=!0;break;case e.STYLE_GEOFF:}}},{key:"frameStarfield",value:function(){this.noiseBurn=-1;for(var e=this.parent,t=s.init("frameStarfield.starsinit",0),i=e.screen.width/2,n=e.screen.height/2,o=0;o<this.nParticles;o++){e.p[o].attract=r.a.ATTRACT_NONE,t.value||(e.p[o].color=Object(a.f)()%255,e.p[o].setTrueColor(e.pe),e.p[o].ax=Object(a.e)(1),e.p[o].ay=Object(a.e)(1));var c,l,h=1/(2-e.p[o].color*(1/128));c=e.p[o].ax*h,l=e.p[o].ay*h,e.p[o].color+=this.zMoveSpeed,e.p[o].color>255&&(e.p[o].color=Object(a.a)(0,e.p[o].color-255),e.p[o].ax=Object(a.e)(1),e.p[o].ay=Object(a.e)(1));var u,p;h=1/(2-e.p[o].color*(1/128)),u=e.p[o].ax*h,p=e.p[o].ay*h,(Object(a.d)(u)>1||Object(a.d)(p)>1)&&(e.p[o].color=0,e.p[o].ax=Object(a.e)(1),e.p[o].ay=Object(a.e)(1)),e.p[o].setTrueColor(e.pe),e.p[o].dx=(u-c)*i,e.p[o].dy=(p-l)*n,e.p[o].x=c*i+i,e.p[o].y=l*n+n}t.value=1}},{key:"frameGravity",value:function(){var t=this.parent;switch((t.time-t.startTime)/this.GRAV_TIME%4){case 0:this.xgrav=0,this.ygrav=.1,this.burnDown=!1;break;case 1:this.xgrav=-.1,this.ygrav=0;break;case 2:this.xgrav=0,this.ygrav=-.1,this.burnDown=!0;break;case 3:this.xgrav=.1,this.ygrav=0}if(t.time>t.lastTime&&this.useRandom&&Object(a.f)()%this.RANDEFFECT==0)switch(Object(a.f)()%7){case 0:this.shakeUp=!0;break;case 1:this.freeze=!0;break;case 2:this.comet=!0;break;case 3:this.follow=!this.follow;break;case 4:this.multipleFollow=!this.multipleFollow;break;case 5:this.noiseBurn=Object(a.f)()%3-1;break;case 6:this.useGravity=!this.useGravity}if(this.particleStyle===e.STYLE_NORMAL){if(Object(a.f)()%(16*this.RANDEFFECT)==0)switch(Object(a.f)()%8){case 0:this.setMode(e.STYLE_SPIRALS);break;case 1:this.setMode(e.STYLE_EXPLOSIVE);break;case 2:this.setMode(e.STYLE_RINGS);break;case 3:this.setMode(e.STYLE_POPCORN);break;case 4:this.setMode(e.STYLE_RAINBOWHOLE),this.doRainbowHole(1);break;case 5:this.setMode(e.STYLE_WORMS);break;case 6:this.setMode(e.STYLE_GALATIC_STORM);break;case 7:this.setMode(e.STYLE_PIXIE_DUST)}}else this.setMode(this.particleStyle);this.handleGravity()}},{key:"handleGravity",value:function(){this.popcorn&&this.doPopcorn(),this.innerRing&&this.doInnerRing(),this.shakeUp&&this.doShakeUp(),this.freeze&&this.doFreeze(),this.explode&&this.doExplode(),this.comet&&this.doComet(),this.emit&&this.doEmit(),this.rainbowHole&&this.doRainbowHole(),this.squigglyWiggly&&this.doSquigglyWiggly(),this.galacticStorm&&this.doGalacticStorm(),this.pixieDust&&this.doPixieDust(),this.particleStyle==e.STYLE_GEOFF&&this.doGeoff(),(this.attract||this.followMouse)&&this.doAttractFollow(),this.identityAngle+=.01,this.identityAngle>Math.PI&&(this.identityAngle-=2*Math.PI)}},{key:"doPopcorn",value:function(){console.log("pop corn");var t=s.init("doPopcorn.firstInit",0),i=this.parent;if(this.particleStyle!=e.STYLE_POPCORN||0==t.value||this.particleStyle==e.STYLE_POPCORN&&Object(a.f)()%50==0){t.value=1;for(var n=Object(a.f)()%15+5;n;n--){var r,o,c=Object(a.d)(Object(a.e)(6))+1,l=1&Object(a.f)(),h=Object(a.f)()%this.nParticles;r=i.p[h].x,o=i.p[h].y;for(var u,p,d=this.nParticles/20;d;d--){var f=Object(a.f)()%this.nParticles;i.p[f].x=r,i.p[f].y=o,u=l?.5*c:Object(a.d)(Object(a.e)(c)),p=Object(a.e)(Math.PI),i.p[f].dx=Math.cos(p)*u,i.p[f].dy=Math.sin(p)*u,this.altColor&&(i.p[f].color=Object(a.f)()%84+170),i.p[f].setTrueColor(i.pe)}}this.popcorn=!1}}},{key:"doInnerRing",value:function(){console.log("inner ring");var t=this.parent,i=s.init("doInnerRing.firstInit",0);if(this.articleStyle!=e.STYLE_RINGS||0==i.value||this.particleStyle==e.STYLE_RINGS&&Object(a.f)()%1e3==0){i.value=1;for(var n,r,o=Object(a.d)(Object(a.e)(10))+2,c=Object(a.f)()%3+1,l=Object(a.d)(Object(a.e)(.5))+.4,h=t.screen.WIDTH*l*.5,u=t.screen.HEIGHT*l*.5,p=1&Object(a.f)(),d=Object(a.f)()%4,f=t.screen.WIDTH/2+Object(a.e)(t.screen.WIDTH/2-h),b=t.screen.HEIGHT/2+Object(a.e)(t.screen.HEIGHT/2-u),y=0;y<this.nParticles;y++)y%c==0&&(r=Object(a.e)(Math.PI),t.p[y].x=f+Math.sin(r)*u,t.p[y].y=b-Math.cos(r)*u,n=p?.5*o:Object(a.d)(Object(a.e)(o)),1==d&&(n=0),2==d&&(r+=.5*Math.PI),3==d&&(r-=.5*Math.PI),t.p[y].dx=-Math.sin(r)*n,t.p[y].dy=Math.cos(r)*n,this.altColor&&(t.p[y].color=Object(a.f)()%84+170),t.p[y].setTrueColor(t.pe));this.innerRing=!1}}},{key:"doShakeUp",value:function(){console.log("shake up");for(var e=this.parent,t=0;t<this.nParticles;t++)e.p[t].dx-=40*this.xgrav,e.p[t].dy-=40*this.ygrav;this.shakeUp=!1}},{key:"doFreeze",value:function(){console.log("freeze");for(var e=this.parent,t=0;t<this.nParticles;t++)e.p[t].dx=0,e.p[t].dy=0;this.freeze=!1}},{key:"doStatic",value:function(e){var t=this.parent,i=s.init("doStatic.firstInit",0);if(e||0==i.value){i.value=1;for(var n=t.screen.width,r=t.screen.height,a=this.nParticles,o=Math.sqrt(n*r/a),c=Math.ceil(n/o),l=Math.ceil(a/c),h=Math.floor(n/(c+1)),u=Math.floor(r/(l+1)),p=u,d=h,f=0;f<a;f++){t.p[f].x=d,t.p[f].y=p;var b=d-n/2,y=p-r/2,O=Math.sqrt(b*b+y*y);t.p[f].dx=-b/O,t.p[f].dy=-y/O,t.p[f].color=180,t.p[f].setTrueColor(t.pe),d+=h,d>=n&&(d=h,p+=u)}}}},{key:"doExplode",value:function(){var t=this.parent,i=s.init("doExplode.firstInit",0);if(this.particleStyle!==e.STYLE_EXPLOSIVE||0==i.value||this.particleStyle==e.STYLE_EXPLOSIVE&&Object(a.f)()%50==0){console.log("explode"),i.value=1;var n,o,c=Object(a.d)(Object(a.e)(9))+3,l=1&Object(a.f)();0==this.explodeX||0==this.explodeY?(n=r.a.XOFF+Object(a.f)()%(t.screen.WIDTH-2*r.a.XOFF),o=r.a.YOFF+Object(a.f)()%(t.screen.HEIGHT-2*r.a.YOFF)):(n=Object(a.b)(Object(a.a)(this.explodeX,r.a.XOFF),t.screen.WIDTH-r.a.XOFF-1),o=Object(a.b)(Object(a.a)(this.explodeY,r.a.YOFF),t.screen.HEIGHT-r.a.YOFF-1)),this.explodeX=this.explodeY=0;for(var h,u,p=Object(a.f)()%3+1,d=0;d<this.nParticles;d++)d%p==0&&(t.p[d].x=n,t.p[d].y=o,h=l?.5*c:Object(a.d)(Object(a.e)(c)),u=Object(a.e)(Math.PI),t.p[d].dx=Math.cos(u)*h,t.p[d].dy=Math.sin(u)*h,this.altColor&&(t.p[d].color=Object(a.f)()%84+170),t.p[d].setTrueColor(t.pe));this.explode=!1}}},{key:"doComet",value:function(){console.log("comet");for(var e=this.parent,t=Object(a.d)(Object(a.e)(8)),i=r.a.XOFF+Object(a.f)()%(e.screen.WIDTH-2*r.a.XOFF),n=r.a.YOFF+Object(a.f)()%(e.screen.HEIGHT-2*r.a.YOFF),o=Object(a.e)(Math.PI),s=0;s<this.nParticles;s++)e.p[s].x=i+Object(a.e)(1),e.p[s].y=n+Object(a.e)(1),e.p[s].dx=Math.cos(o)*t,e.p[s].dy=Math.sin(o)*t,this.altColor&&(e.p[s].color=Object(a.f)()%84+170),e.p[s].setTrueColor(e.pe);this.comet=!1}},{key:"doEmit",value:function(){console.log("emit");var t=this.parent,i=s.init("doEmit.firstInit",0);if(this.particleStyle!=e.STYLE_SPIRALS||0==i.value||this.particleStyle==e.STYLE_SPIRALS&&Object(a.f)()%500==0){i.value=1;var n;if(this.emitCount=this.nParticles,this.emitCount>0){var r=2*Math.PI/(this.nParticles/4);for(this.emitRotate<0&&(r=-r),n=this.emitCount,this.firstInit||(this.emitCount=Object(a.a)(this.emitCount-Object(a.a)(this.nParticles/100,1),0));n-- >this.emitCount;)t.p[n].x=t.screen.WIDTH/2,t.p[n].y=t.screen.HEIGHT/2,0!=this.emitRotate?(t.p[n].dx=4*Math.sin(n*r),t.p[n].dy=4*-Math.cos(n*r)):(t.p[n].dx=0,t.p[n].dy=0),this.altColor&&(t.p[n].color=Object(a.f)()%84+170),t.p[n].setTrueColor(t.pe);this.emit=!1}}}},{key:"doAttractFollow",value:function(){var e,t=this.parent,i=this.multipleFollow?63:32767;for(e=0;e<this.nParticles;e++)this.follow&&e&i?(this.followMouse&&0==(e&i)?(t.p[e].ax=t.xMouse,t.p[e].ay=t.yMouse):(t.p[e].ax=t.p[e&~i].x,t.p[e].ay=t.p[e&~i].y),t.p[e].attract=r.a.ATTRACT_ANGLE|(this.useGravity?r.a.ATTRACT_GRAVITY:0)):(this.followMouse?(t.p[e].ax=t.xMouse,t.p[e].ay=t.yMouse,t.p[e].attract=r.a.ATTRACT_ANGLE|(this.useGravity?r.a.ATTRACT_GRAVITY:0)):t.p[e].attract=r.a.ATTRACT_NONE|(this.useGravity?r.a.ATTRACT_GRAVITY:0),t.p[e].setTrueColor(t.pe))}},{key:"doRainbowHole",value:function(t){console.log("rainbow hole");var i=this.parent,n=s.init("doRainbowHole.init",0),r=s.init("doRainbowHole.velocity",0);if(!n.value||t||this.particleStyle==e.STYLE_RAINBOWHOLE&&Object(a.f)()%1e3==0){r.value=Object(a.a)(Object(a.d)(Object(a.e)(6)),1),this.magnetX=i.screen.WIDTH/2+Object(a.f)()%100-50,this.burnDown?this.magnetY=Object(a.a)(i.screen.HEIGHT/2+Object(a.f)()%80-40-i.screen.HEIGHT/4,20):this.magnetY=Object(a.b)(i.screen.HEIGHT/2+Object(a.f)()%80-40+i.screen.HEIGHT/4,i.screen.HEIGHT-20);for(var o=0;o<this.nParticles;o++){i.p[o].x=Object(a.f)()%i.screen.WIDTH,i.p[o].y=Object(a.f)()%i.screen.HEIGHT;var c=this.distance(i.p[o].x,i.p[o].y,this.magnetX,this.magnetY);i.p[o].dx=(this.magnetX-i.p[o].x)/c*r.value,i.p[o].dy=(this.magnetY-i.p[o].y)/c*r.value,this.altColor&&(i.p[o].color=Object(a.f)()%84+170),i.p[o].setTrueColor(i.pe)}n.value=1}else if(Object(a.f)()%10==0){this.magnetX+=Object(a.f)()%10-5,this.magnetX<30?this.magnetX=30:this.magnetX>i.screen.WIDTH-30&&(this.magnetX=i.screen.WIDTH-30);for(var o=0;o<this.nParticles;o++){var c=this.distance(i.p[o].x,i.p[o].y,this.magnetX,this.magnetY);i.p[o].dx=(this.magnetX-i.p[o].x)/c*r.value,i.p[o].dy=(this.magnetY-i.p[o].y)/c*r.value,this.altColor&&(i.p[o].color=Object(a.f)()%84+170),i.p[o].setTrueColor(i.pe)}}}},{key:"distance",value:function(e,t,i,n){var r,o;return e==i?Object(a.d)(t-n):t==n?Object(a.d)(e-i):(r=e-i,o=t-n,Math.sqrt(r*r+o*o))}},{key:"doSquigglyWiggly",value:function(e){console.log("squiggly wiggly");var t,i,n=this.parent,r=s.init("doSquigglyWiggly.firstInit",0);if(e||!r.value||Object(a.f)()%1500==0)for(var o=0;o<this.nParticles;o++)n.p[o].x=Object(a.f)()%(n.screen.WIDTH-20)+10,n.p[o].y=Object(a.f)()%(n.screen.HEIGHT-20)+10,this.altColor&&(n.p[o].color=Object(a.f)()%84+170),n.p[o].setTrueColor(n.pe);t=Object(a.a)(Object(a.d)(Object(a.e)(6)),1);for(var o=0;o<this.nParticles;o++)if(o%5==0)Object(a.f)()%100&&(n.p[o].dx=Object(a.e)(1)*t,n.p[o].dy=Object(a.e)(1)*t);else{n.p[o].x+=n.p[o].dx,n.p[o].y+=n.p[o].dy,i=Object(a.e)(Math.PI),n.p[o].dx=cos(i)*t,n.p[o].dy=sin(i)*t,this.altColor&&(n.p[o].color=Object(a.f)()%84+170),n.p[o].setTrueColor(n.pe)}}},{key:"doGalacticStorm",value:function(e){console.log("galactic storm");var t,i,n=this.parent,r=s.init("doGalacticStorm.firstInit",0);if(t=Object(a.d)(Object(a.e)(6)),t=Object(a.a)(t,1),e||!r.value||Object(a.f)()%1500==0){for(var o=0;o<this.nParticles;o++)o%25==0&&(n.p[o].x=Object(a.f)()%(n.screen.WIDTH-20)+10,n.p[o].y=Object(a.f)()%(n.screen.HEIGHT-20)+10,n.p[o].dx=Object(a.e)(1)*t,n.p[o].dy=Object(a.e)(1)*t,this.altColor&&(n.p[o].color=Object(a.f)()%84+170),n.p[o].setTrueColor(n.pe));r.value=1}for(var o=0;o<this.nParticles;o++)if(o%25==0)Object(a.f)()%1e4&&(n.p[o].dx=Object(a.e)(1)*t,n.p[o].dy=Object(a.e)(1)*t);else{n.p[o].x+=n.p[o].dx,n.p[o].y+=n.p[o].dy,i=Object(a.e)(Math.PI),n.p[o].dx=Math.sin(i)*t,n.p[o].dy=Math.sin(i)*t,this.altColor&&(n.p[o].color=Object(a.f)()%84+170),n.p[o].setTrueColor(n.pe)}}},{key:"doPixieDust",value:function(e){console.log("pixie dust");var t,i,n,r,o=s.init("doPixieDust.firstInit",0),c=this.parent;if(t=Object(a.d)(Object(a.e)(10)),t=Object(a.a)(t,1),e||!o.value||Object(a.f)()%1500==0){for(var l=0;l<this.nParticles;l++)l%5==0&&(i=l,c.p[l].x=Object(a.f)()%(c.screen.WIDTH-20)+10,c.p[l].y=Object(a.f)()%(c.screen.HEIGHT-20)+10,c.p[l].dx=Object(a.e)(1)*t,c.p[l].dy=Object(a.e)(1)*t,this.altColor&&(c.p[l].color=Object(a.f)()%84+170),c.p[l].setTrueColor(c.pe));o.value=1}for(var l=0;l<this.nParticles;l++)if(l%5==0)i=l,Object(a.f)()%50==0&&(c.p[l].dx=Object(a.e)(1)*t,c.p[l].dy=Object(a.e)(1)*t,this.altColor&&(c.p[l].color=Object(a.f)()%84+170),c.p[l].setTrueColor(c.pe));else{var h=i;r=Object(a.e)(5),n=r-2.5,n<0&&Object(a.d)(n)<5/4?n=-5/4:n>0&&Object(a.d)(n)<5/4&&(n=5/4),c.p[l].x=c.p[h].x+n,r=Object(a.e)(5),n=r-2.5,n<0&&Object(a.d)(n)<5/4?n=-5/4:n>0&&Object(a.d)(n)<5/4&&(n=5/4),c.p[l].y=c.p[h].y+n,Object(a.e)(Math.PI),c.p[l].dx=c.p[h].dx/3,c.p[l].dy=c.p[h].dy/3,this.altColor&&(c.p[l].color=Object(a.f)()%84+170),c.p[l].setTrueColor(c.pe)}}},{key:"doGeoff",value:function(e){console.log("geoff");var t,i,n,r,o=s.init("doGeoff.firstInit",0);if(t=Object(a.d)(Object(a.e)(10)),t=Object(a.a)(t,1),e||!o.value||Object(a.f)()%1500==0){for(var c=0;c<this.nParticles;c++)c%5==0&&(i=c,parent.p[c].x=Object(a.f)()%(parent.screen.WIDTH-20)+10,parent.p[c].y=Object(a.f)()%(parent.screen.HEIGHT-20)+10,parent.p[c].dx=Object(a.e)(1)*t,parent.p[c].dy=Object(a.e)(1)*t,this.altColor&&(parent.p[c].color=Object(a.f)()%84+170),parent.p[c].setTrueColor(parent.pe));o.value=1}for(var c=0;c<this.nParticles;c++)if(c%5==0)i=c,Object(a.f)()%50==0&&(parent.p[c].dx=Object(a.e)(1)*t,parent.p[c].dy=Object(a.e)(1)*t,this.altColor&&(parent.p[c].color=Object(a.f)()%84+170),parent.p[c].setTrueColor(parent.pe));else{var l=i;r=Object(a.e)(5),n=r-2.5,n<0&&Object(a.d)(n)<5/4?n=-5/4:n>0&&Object(a.d)(n)<5/4&&(n=5/4),parent.p[c].x=parent.p[l].x+n,r=Object(a.e)(5),n=r-2.5,n<0&&Object(a.d)(n)<5/4?n=-5/4:n>0&&Object(a.d)(n)<5/4&&(n=5/4),parent.p[c].y=parent.p[l].y+n,Object(a.e)(Math.PI),parent.p[c].dx=parent.p[l].dx/3,parent.p[c].dy=parent.p[l].dy/3,this.altColor&&(parent.p[c].color=Object(a.f)()%84+170),parent.p[c].setTrueColor(parent.pe)}}}]),e}();c.STYLE_NORMAL=0,c.STYLE_STARFIELD=1,c.STYLE_EXPLOSIVE=2,c.STYLE_RINGS=3,c.STYLE_SPIRALS=4,c.STYLE_POPCORN=5,c.STYLE_RAINBOWHOLE=6,c.STYLE_WORMS=7,c.STYLE_GALATIC_STORM=8,c.STYLE_PIXIE_DUST=9,c.STYLE_GEOFF=10,c.STYLE_STATIC=11,c.styles=[],c.styles[c.STYLE_NORMAL]="Normal",c.styles[c.STYLE_STARFIELD]="Starfield",c.styles[c.STYLE_EXPLOSIVE]="Explosive",c.styles[c.STYLE_RINGS]="Rings",c.styles[c.STYLE_SPIRALS]="Spirals",c.styles[c.STYLE_POPCORN]="Popcorn",c.styles[c.STYLE_RAINBOWHOLE]="Rainbow Hole",c.styles[c.STYLE_WORMS]="Worms",c.styles[c.STYLE_GALATIC_STORM]="Galactic Storm",c.styles[c.STYLE_PIXIE_DUST]="Pixie Dust",c.styles[c.STYLE_GEOFF]="Geoff",c.styles[c.STYLE_STATIC]="Static"},function(e,t,i){"use strict";i.d(t,"a",function(){return o});var n,r=function(){function e(e,t){var i=[],n=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){r=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw a}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(e,t){var i,r,a,o="input-"+e;switch(a=n.createElement("div"),r=n.createElement("label"),r.for=o,r.appendChild(n.createTextNode(t.label)),a.appendChild(r),t.type){case"slider":i=n.createElement("input"),i.type="range",i.min=0|t.min,i.max=1|t.max,i.step=t.step,i.value=t.get?t.get():t.value,a.appendChild(i);var s=n.createElement("span");a.appendChild(s);break;case"checkbox":i=n.createElement("input"),i.type="checkbox",i.checked=t.get?t.get():t.value,a.appendChild(i);break;case"color":i=n.createElement("input"),i.type="color",i.value=t.get?t.get():t.value,a.appendChild(i);break;case"select":i=n.createElement("select"),i.value=t.get?t.get():t.value,a.appendChild(i)}return t.cssClass&&i.classList.add(t.cssClass),i.dataset.config=e,i.id=o,t.input=i,a},o=function(e,t,i){n=i.ownerDocument,e.forEach(function(e){var r=n.createElement("fieldset");if(i.appendChild(r),e.legend){var o=n.createElement("legend");o.appendChild(n.createTextNode(e.legend)),r.appendChild(o)}e.options.forEach(function(e){if(t[e]){var i=a(e,t[e]);r.appendChild(i)}})}),Object.entries(t).forEach(function(e){var t=r(e,2),n=t[0],o=t[1];if(!o.input){var s=a(n,o);i.appendChild(s)}}),i.addEventListener("change",function(e){var i=e.target,n=i.dataset.config,r=t[n];if(void 0===r)throw"Invalid option key "+n;var a,o=i.type;a="checkbox"===o?i.checked:"select"===o?i.options[i.selectedIndex].value:"slider"===o?0|i.value:i.value,r.set?r.set(a):r.value=a},!1)}}]);